# MC小游戏比赛模拟器使用说明

## 概述
这个脚本用于模拟真实的MC小游戏比赛环境，可以向后端API发送各种模拟数据，测试系统功能。

## 功能特性

### 🏆 支持的比赛类型
- **宾果时速 (bingo)**: 收集指定物品完成宾果线的竞速游戏
- **跑酷追击 (parkour)**: 通过各种障碍到达终点的跑酷比赛  
- **团队对抗 (pvp)**: 多团队PVP对战
- **建筑大赛 (build)**: 限时建筑创作比赛

### 🎮 模拟数据类型
- **游戏事件**: 玩家行为、成就、物品获取等
- **玩家分数**: 实时分数、等级、血量、经验值更新
- **排行榜**: 动态排名变化
- **团队统计**: 团队总分、目标完成情况
- **投票环节**: 观众投票、结果统计

### 🎯 运行模式
- **完整锦标赛 (full)**: 包含游戏→投票→决赛的完整流程
- **仅游戏 (game-only)**: 只模拟游戏事件和数据
- **仅投票 (voting-only)**: 只模拟投票环节

## 使用方法

### 基本用法
```bash
# 安装依赖
pip install aiohttp

# 运行完整锦标赛模拟（默认宾果时速）
python simulate_match.py

# 指定比赛类型
python simulate_match.py --match-type pvp

# 指定服务器地址
python simulate_match.py --server-url http://localhost:8000

# 只模拟游戏环节，持续10分钟
python simulate_match.py --mode game-only --duration 600

# 只模拟投票环节
python simulate_match.py --mode voting-only
```

### 参数说明
- `--server-url`: 后端服务器地址 (默认: http://localhost:8000)
- `--match-type`: 比赛类型 (bingo/parkour/pvp/build，默认: bingo)
- `--mode`: 模拟模式 (full/game-only/voting-only，默认: full)
- `--duration`: 游戏持续时间，仅在game-only模式有效 (默认: 300秒)

## 模拟流程

### 完整锦标赛流程 (--mode full)
1. **创建锦标赛** - 生成锦标赛基本信息
2. **创建阶段** - 设置游戏→投票→决赛三个阶段
3. **第一轮比赛** - 模拟初赛游戏事件（2分钟）
4. **投票环节** - 观众为前5名选手投票
5. **决赛** - 模拟决赛游戏事件（3分钟）
6. **显示结果** - 最终排行榜

### 模拟的玩家
脚本内置15个模拟玩家：
- Steve, Alex, Herobrine, Notch, Dream
- TechnoBlade, Philza, Wilbur, Tommy, Tubbo  
- Ranboo, George, Sapnap, BadBoyHalo, Skeppy

### 模拟的团队
- **红队**: Steve, Alex, Herobrine, Notch
- **蓝队**: Dream, TechnoBlade, Philza, Wilbur
- **绿队**: Tommy, Tubbo, Ranboo, George
- **黄队**: Sapnap, BadBoyHalo, Skeppy

## 输出示例

```
🎮 MC小游戏比赛模拟器
🌐 服务器地址: http://localhost:8000
🎯 比赛类型: bingo
⏱️  模拟模式: full
==================================================
🎯 开始完整锦标赛模拟
🏆 创建锦标赛: MC宾果时速锦标赛
✅ 锦标赛创建成功: tournament_1643123456
📋 创建比赛阶段...
✅ 阶段创建成功: 第一轮 - 宾果时速
✅ 阶段创建成功: 观众投票环节
✅ 阶段创建成功: 决赛 - 宾果时速

=== 第一轮比赛 ===
🚀 开始阶段: tournament_1643123456_stage_1
🎮 开始比赛: 宾果时速
🎮 开始模拟宾果时速比赛，预计120秒
📊 已模拟 15 个事件，剩余时间: 95秒
...
🏁 比赛结束！总共模拟了 45 个事件

=== 投票环节 ===
🗳️ 创建投票会话...
📝 添加投票选项...
🗳️ 开始模拟投票...
📊 已收集 11 票...
🏆 投票结果:
  Dream (分数: 245): 15 票 (30.0%)
  Steve (分数: 198): 12 票 (24.0%)
  ...

=== 决赛 ===
🎮 开始模拟宾果时速比赛，预计180秒
🏁 比赛结束！总共模拟了 67 个事件

🎊 锦标赛模拟完成！
🏆 锦标赛ID: tournament_1643123456

📊 最终排行榜:
  1. Dream - 分数: 487, 等级: 3
  2. Steve - 分数: 445, 等级: 2
  3. TechnoBlade - 分数: 423, 等级: 3
  4. Alex - 分数: 398, 等级: 2
  5. Tommy - 分数: 376, 等级: 2
```

## 注意事项

1. **确保后端服务运行**: 运行脚本前请确保后端服务在指定地址正常运行
2. **网络连接**: 脚本需要能够访问后端API
3. **依赖安装**: 需要安装aiohttp库用于异步HTTP请求
4. **数据持久化**: 所有模拟数据会保存到后端数据库中
5. **实时推送**: 如果有WebSocket客户端连接，会收到实时事件推送

## 故障排除

### 常见错误
- **连接失败**: 检查服务器地址和端口是否正确
- **API错误**: 查看后端日志确认API是否正常工作
- **模块未找到**: 使用`pip install aiohttp`安装依赖

### 调试模式
在脚本中可以调整以下参数进行调试：
- 修改事件间隔时间（`await asyncio.sleep()`）
- 调整事件发生概率
- 增加日志输出

## 扩展功能

脚本支持轻松扩展：
- 添加新的比赛类型
- 定制事件类型和数据
- 调整模拟算法
- 增加更多玩家和团队
- 定制投票选项